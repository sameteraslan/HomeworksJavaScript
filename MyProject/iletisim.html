<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8"/>
    <meta name="theme-color" content="white" />
    <meta name="author" content="Abdulsamet ERASLAN, 2018" />
    <meta name="description" content="Fatih Sultan Mehmet Vakif University, Computer Engineering" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
<style>
body {font-family: Arial, Helvetica, sans-serif;}
* {box-sizing: border-box;}

input[type=text], select, textarea {
    width: 100%;
    padding: 12px;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
    margin-top: 6px;
    margin-bottom: 16px;
    resize: vertical;
}

input[type=submit] {
    background-color: #4CAF50;
    color: white;
    padding: 12px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

input[type=submit]:hover {
    background-color: #45a049;
}

.container {
    border-radius: 5px;
    background-color: #f2f2f2;
    padding: 20px;
}
</style>
</head>
<body>

<h3>İletişim</h3>

<div class="container">
  <form id="contact_form">

    <label for="name">Adiniz</label>
    <input type="text" id="name" name="firstname" placeholder="Adınız..">

    <label for="sname">Soyadiniz</label>
    <input type="text" id="sname" name="lastname" placeholder="Soyadınız..">

    <label for="country">Ülke</label>
    <select id="country" name="country">
      <option value="turkiye">Türkiye</option>
      <option value="rusya">Rusya</option>
      <option value="abd">ABD</option>
    </select>

    <label for="subject">Konu</label>
    <textarea id="subject" name="subject" placeholder="Buraya iletmek istediğiniz konuyu yazın." style="height:200px"></textarea>

    <input type="submit" onClick="sentMessage();" value="Gönder">
	
  </form>
</div>
<script>
function sentMessage() {
	let name = document.getElementById("name").value;
	let sname = document.getElementById("sname").value;
	let country = document.getElementById("country");
	let country_name = country.options[country.selectedIndex].value;
	let topic = document.getElementById("subject").value;

	// Get Current Date
	// Reference: https://stackoverflow.com/questions/1531093/how-do-i-get-the-current-date-in-javascript
	let today = new Date();
	let dd = today.getDate();
	let mm = today.getMonth() + 1; // January is 0, so we should add (+1)!
	let yyyy = today.getFullYear();
	if(dd < 10)
	    dd = '0' + dd
	if(mm < 10)
	    mm = '0' + mm
	today = mm + '/' + dd + '/' + yyyy;

	let myObject = {"name" : name, 
	    	    "sname" : sname,
	    	    "country" : country_name,
	    	    "topic" : topic,
	    	    "date" : today};
	let firebaseRef = firebase.database().ref("ILETISIM");	
	firebaseRef.push(myObject);
	


	document.getElementById("contact_form").innerHTML = '<center><img src="tick.png" class="avatar"></center>';
	setTimeout(function() {
  		window.location.href = "https://sameteraslan.github.io/HomeworksJavaScript/MyProject/deneme.html";
	}, 3000);

}
</script>
</body>
</html>
